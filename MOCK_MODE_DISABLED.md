# Mock Mode –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

Mock Mode —Ç–µ–ø–µ—Ä—å **–ü–û–õ–ù–û–°–¢–¨–Æ –û–¢–ö–õ–Æ–ß–ï–ù** –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö iOS –∏ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π Apple StoreKit –∏ RevenueCat –¥–ª—è –æ–ø–ª–∞—Ç—ã.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. `lib/revenuecat.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `isRealDevice = Platform.OS === 'ios' || Platform.OS === 'android'`
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `loadPurchasesModule()` –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
  - Mock Mode **–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω**
  - –ï—Å–ª–∏ –º–æ–¥—É–ª—å RevenueCat –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
  - –ë–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `null` –¥–ª—è iOS/Android
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `initializeRevenueCat()`:
  - –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è API –∫–ª—é—á
  - Debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
  - –ï—Å–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `isRevenueCatAvailable()`:
  - –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è

### 2. `hooks/use-subscription-store.tsx`
- `isMockMode` —Ç–µ–ø–µ—Ä—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false` –≤–º–µ—Å—Ç–æ `Platform.OS === 'web'`
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `bootstrap()`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ `isRealDevice = Platform.OS === 'ios' || Platform.OS === 'android'`
  - –ï—Å–ª–∏ RevenueCat –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
  - Mock Mode –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–ª—è iOS/Android
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `purchasePackage()`:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Mock Mode, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
  - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ mock —Ä–µ–∂–∏–º–∞ –Ω–∞ production —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `restorePurchases()`:
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Mock Mode –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### 3. `app/_layout.tsx`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RevenueCat —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è iOS/Android
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞
  - –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  - API –∫–ª—é—á (–ø–µ—Ä–≤—ã–µ 10 —Å–∏–º–≤–æ–ª–æ–≤)
  - Mock Mode —Å—Ç–∞—Ç—É—Å (–≤—Å–µ–≥–¥–∞ `false` –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- –ï—Å–ª–∏ API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

## –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –≤–∞—Å

### ‚úÖ –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º iPhone/Android:
1. Mock Mode **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω**
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–≤—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–π Apple StoreKit
3. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º" –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Apple Pay**
4. –û–ø–ª–∞—Ç–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤–∞—à Sandbox –∞–∫–∫–∞—É–Ω—Ç Apple

### ‚ùå –ß—Ç–æ –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- Mock –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ iOS/Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –±–µ–∑ RevenueCat

### üåê –ù–∞ –≤–µ–±-–≤–µ—Ä—Å–∏–∏ (Rork preview):
- Mock Mode –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ iPhone –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```
==================== REVENUECAT INIT ====================
üì± [_layout.tsx] –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ios
üì± [_layout.tsx] –†–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: true
üì± [_layout.tsx] API Key –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç: –î–ê (appl_NIzzm...)
üì± [_layout.tsx] MOCK MODE: false
========================================================

‚úÖ [_layout.tsx] RevenueCat —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!
üì¶ [_layout.tsx] Offerings –∑–∞–≥—Ä—É–∂–µ–Ω—ã: default
üì¶ [_layout.tsx] –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (2):
  1. $rc_monthly - $9.99
     Product ID: premium_monthly
  2. $rc_annual - $79.99
     Product ID: premium_yearly
```

## –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞: "RevenueCat module required for real devices but failed to load"
**–ü—Ä–∏—á–∏–Ω–∞**: –ú–æ–¥—É–ª—å `react-native-purchases` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω.
**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ `bun expo install react-native-purchases` –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –û—à–∏–±–∫–∞: "RevenueCat API key is required for real devices"
**–ü—Ä–∏—á–∏–Ω–∞**: API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ `.env` —Ñ–∞–π–ª–µ.
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `env` –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
EXPO_PUBLIC_REVENUECAT_IOS_KEY=appl_NIzzmGwASbGFsnfAddnshynSnsG
```

### –û—à–∏–±–∫–∞: "Mock mode should never be active on real devices"
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–∏–∑–æ—à–ª–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ - —Ä–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ø–∞–ª–æ –≤ Mock Mode.
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –≤ Sandbox

1. **–°–æ–∑–¥–∞–π—Ç–µ Sandbox –∞–∫–∫–∞—É–Ω—Ç** –≤ App Store Connect
2. **–í—ã–π–¥–∏—Ç–µ –∏–∑ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ Apple ID** –≤ Settings ‚Üí App Store
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ TestFlight
4. **–ù–∞–∂–º–∏—Ç–µ "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º"**
5. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–∏–∞–ª–æ–≥ Apple Pay**
6. –í–æ–π–¥–∏—Ç–µ —Å **Sandbox –∞–∫–∫–∞—É–Ω—Ç–æ–º** (–Ω–µ —Å –≤–∞—à–∏–º –Ω–∞—Å—Ç–æ—è—â–∏–º Apple ID)
7. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É

## –í–∞—à API –∫–ª—é—á

‚úÖ –í–∞—à RevenueCat iOS –∫–ª—é—á —É–∂–µ –ø—Ä–æ–ø–∏—Å–∞–Ω –≤ `.env`:
```
EXPO_PUBLIC_REVENUECAT_IOS_KEY=appl_NIzzmGwASbGFsnfAddnshynSnsG
```

–≠—Ç–æ—Ç –∫–ª—é—á —Ç–µ–ø–µ—Ä—å **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –Ω–∞ –≤—Å–µ—Ö iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, Mock Mode –æ—Ç–∫–ª—é—á–µ–Ω.
